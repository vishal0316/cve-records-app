import { useState } from "react";
import CVEList from "./components/CVEList";
import AddCVE from "./components/AddCVE";
import { ModeToggle } from "./components/mode-toggle";
import { CVEProvider } from "./context/CVEContext";

function App() {
  //An array of objects representing CVE
  const [cveRecords, setCVERecords] = useState([
    {
      id: "CVE-2021-4048",
      severity: "CRITICAL",
      cvss: 9.1,
      affectedPackages: "libblas3",
      cweId: "CWE-125",
    },
    {
      id: "CVE-2022-36227",
      severity: "CRITICAL",
      cvss: 9.8,
      affectedPackages: "libarchive13",
      cweId: "CWE-476",
    },
    {
      id: "CVE-2021-3697",
      severity: "HIGH",
      cvss: 7,
      affectedPackages: "grub-common, grub-pc, grub-pc-bin, grub2-common",
      cweId: "CWE-787",
    },
    {
      id: "CVE-2021-38091",
      severity: "HIGH",
      cvss: 8.8,
      affectedPackages: "libavcodec58, libavutil56, libswresample3",
      cweId: "CWE-190",
    },
    {
      id: "CVE-2016-2781",
      severity: "MEDIUM",
      cvss: 6.5,
      affectedPackages: "coreutils",
      cweId: "CWE-20",
    },
    {
      id: "CVE-2016-9802",
      severity: "MEDIUM",
      cvss: 5.3,
      affectedPackages: "bluez, libbluetooth3",
      cweId: "CWE-119",
    },
    {
      id: "CVE-2019-1563",
      severity: "LOW",
      cvss: 3.7,
      affectedPackages: "libnode72",
      cweId: "CWE-327",
    },
    // Add any other remaining data here
  ]);

  // Adds a new CVE record to the cveRecords
  const addCVERecord = (newRecord) => {
    setCVERecords([...cveRecords, newRecord]);
  };

  //Updates an existing CVE record in the cveRecords
  const updateCVERecord = (updatedRecord) => {
    setCVERecords(
      cveRecords.map((record) =>
        record.id === updatedRecord.id ? updatedRecord : record
      )
    );
  };

  // Deletes a CVE record from the cveRecords
  const deleteCVERecord = (id) => {
    setCVERecords(cveRecords.filter((record) => record.id !== id));
  };

  return (
    <CVEProvider>
      <div className="container mx-auto p-4">
        <div className="justify-between  flex">
          <div>
            <h1 className="text-2xl font-bold mb-4">
              CVE Records (common vulnerabilities and exposures )
            </h1>
          </div>
          <div>
            <ModeToggle />
          </div>
        </div>
        <AddCVE addCVERecord={addCVERecord} />
        <CVEList
          cveRecords={cveRecords}
          updateCVERecord={updateCVERecord}
          deleteCVERecord={deleteCVERecord}
        />
      </div>
    </CVEProvider>
  );
}

export default App;
